# .github/workflows/summary.yml
name: Generate Summary

on:
  workflow_call:
    inputs:
      new_tag:
        required: true
        type: string
      router_result:
        required: true
        type: string
      service_result:
        required: true
        type: string
      cli_result:
        required: true
        type: string
      playground_result:
        required: true
        type: string
      sdk_test_result:
        required: true
        type: string
      sdk_lint_result:
        required: true
        type: string

jobs:
  generate-summary:
    runs-on: ubuntu-latest
    steps:
      - name: Generate Job Summary
        run: |
          echo "---" >> $GITHUB_STEP_SUMMARY
          echo "# ðŸ“‹ Final Workflow Summary" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "## ðŸ·ï¸ Tag Information" >> $GITHUB_STEP_SUMMARY
          echo "**New Release:** \`${{ inputs.new_tag }}\`" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "## ðŸš€ Job Status" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY

          # Header for the table
          echo "| Component | Task | Status | Details |" >> $GITHUB_STEP_SUMMARY
          echo "|-----------|------|--------|----------|" >> $GITHUB_STEP_SUMMARY

          # Router Status
          if [ "${{ inputs.router_result }}" = "success" ]; then
            echo "| ðŸŒ Router | Build & Publish | âœ… | **Successful** |" >> $GITHUB_STEP_SUMMARY
          elif [ "${{ inputs.router_result }}" = "failure" ]; then
            echo "| ðŸŒ Router | Build & Publish | âŒ | **Failed** |" >> $GITHUB_STEP_SUMMARY
          else
            echo "| ðŸŒ Router | Build & Publish | âš ï¸ | **Cancelled** |" >> $GITHUB_STEP_SUMMARY
          fi

          # Service Status
          if [ "${{ inputs.service_result }}" = "success" ]; then
            echo "| âš™ï¸ Service | Build & Publish | âœ… | **Successful** |" >> $GITHUB_STEP_SUMMARY
          elif [ "${{ inputs.service_result }}" = "failure" ]; then
            echo "| âš™ï¸ Service | Build & Publish | âŒ | **Failed** |" >> $GITHUB_STEP_SUMMARY
          else
            echo "| âš™ï¸ Service | Build & Publish | âš ï¸ | **Cancelled** |" >> $GITHUB_STEP_SUMMARY
          fi

          # CLI Status
          if [ "${{ inputs.cli_result }}" = "success" ]; then
            echo "| ðŸ”§ CLI | Build & Publish | âœ… | **Successful** |" >> $GITHUB_STEP_SUMMARY
          elif [ "${{ inputs.cli_result }}" = "failure" ]; then
            echo "| ðŸ”§ CLI | Build & Publish | âŒ | **Failed** |" >> $GITHUB_STEP_SUMMARY
          else
            echo "| ðŸ”§ CLI | Build & Publish | âš ï¸ | **Cancelled** |" >> $GITHUB_STEP_SUMMARY
          fi

          # Playground Status
          if [ "${{ inputs.playground_result }}" = "success" ]; then
            echo "| ðŸŽ® Playground | Deploy to Testnet | âœ… | **Successful** |" >> $GITHUB_STEP_SUMMARY
          elif [ "${{ inputs.playground_result }}" = "failure" ]; then
            echo "| ðŸŽ® Playground | Deploy to Testnet | âŒ | **Failed** |" >> $GITHUB_STEP_SUMMARY
          else
            echo "| ðŸŽ® Playground | Deploy to Testnet | âš ï¸ | **Cancelled** |" >> $GITHUB_STEP_SUMMARY
          fi

          # SDK Status
          if [ "${{ inputs.sdk_test_result }}" = "success" ]; then
            echo "| ðŸ“¦ SDK | Tests | âœ… | **Passed** |" >> $GITHUB_STEP_SUMMARY
          elif [ "${{ inputs.sdk_test_result }}" = "failure" ]; then
            echo "| ðŸ“¦ SDK | Tests | âŒ | **Failed** |" >> $GITHUB_STEP_SUMMARY
          else
            echo "| ðŸ“¦ SDK | Tests | âš ï¸ | **Cancelled** |" >> $GITHUB_STEP_SUMMARY
          fi

          if [ "${{ inputs.sdk_lint_result }}" = "success" ]; then
            echo "| ðŸ“¦ SDK | Lint | âœ… | **Passed** |" >> $GITHUB_STEP_SUMMARY
          elif [ "${{ inputs.sdk_lint_result }}" = "failure" ]; then
            echo "| ðŸ“¦ SDK | Lint | âŒ | **Failed** |" >> $GITHUB_STEP_SUMMARY
          else
            echo "| ðŸ“¦ SDK | Lint | âš ï¸ | **Cancelled** |" >> $GITHUB_STEP_SUMMARY
          fi

          echo "" >> $GITHUB_STEP_SUMMARY
          echo "---" >> $GITHUB_STEP_SUMMARY
